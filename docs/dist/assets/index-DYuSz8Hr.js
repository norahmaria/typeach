import{R as A,d as f,r as d,p as P,g as y,k as _,c as R,u as h,t as O,f as j,i as C,S as x,w as E,a as T,h as I,j as $,A as F,z as S,L as z,x as b,n,O as L,o as M,y as K}from"./index-tvZMCYyo.js";import{u as N,f as U,s as V,o as q,a as w}from"./floating-ui.vue-Cf8nPmDF.js";const m=Symbol("peachy-dialog"),B=A(c=>{c()},25),G=f({__name:"Dialog",setup(c){const i=d(!1),l=d(!1),o=d(),s=d(),t=d(),a=d();return P(m,{isOpen:y(i),isAboutToOpen:y(l),targetId:y(o),titleId:y(s),descriptionId:y(t),trigger:a,setTargetId(e){o.value=e},setTitleId(e){s.value=e},setDescriptionId(e){t.value=e},setTrigger(e){a.value=e},open(){l.value=!0,setTimeout(()=>i.value=!0,0)},close(){l.value=!1,i.value=!1}}),(e,D)=>_(e.$slots,"default")}}),H=["id","aria-labelledby","aria-describedby"],J=f({__name:"DialogTarget",props:{id:{default:()=>R()},modal:{type:Boolean,default:!0},placement:{default:void 0},closeOnOutsideClick:{type:Boolean,default:!1}},setup(c){const i=c,{targetClass:l}=h("dialog",["target"]),o=O(i,"id"),s=O(i,"placement"),t=j(()=>e==null?void 0:e.trigger.value),a=d(),e=C(m),{floatingStyles:D,update:u,placement:k}=N(t,a,{placement:s,middleware:[U({padding:20}),V({padding:20})],open:e==null?void 0:e.isOpen,strategy:"fixed"});return x(()=>u()),q(a,()=>{var r;i.closeOnOutsideClick&&(e==null||e.close(),(r=a.value)==null||r.close())}),w(window,"resize",r=>{var p;s.value&&((p=e==null?void 0:e.isOpen)!=null&&p.value)&&B(u)}),w(document,"scroll",r=>{var p;s.value&&((p=e==null?void 0:e.isOpen)!=null&&p.value)&&B(u)}),w(a,"close",()=>{e==null||e.close()}),E((e==null?void 0:e.isOpen)??d(),r=>{s.value&&r&&u()}),T((e==null?void 0:e.isOpen)??d(),r=>{var p,g,v;if(!r){e==null||e.close(),(p=a.value)==null||p.close();return}e==null||e.open(),i.modal?(g=a.value)==null||g.showModal():(v=a.value)==null||v.show()}),T(o,r=>{e==null||e.setTargetId(r)}),(r,p)=>{var g,v;return I(),$("dialog",{ref_key:"target",ref:a,id:r.id,class:b(n(l)()),style:L(r.placement?n(D):void 0),"aria-labelledby":n((g=n(e))==null?void 0:g.titleId),"aria-describedby":n((v=n(e))==null?void 0:v.descriptionId),tabindex:"0"},[F(z,{is:"h2"},{default:S(()=>[_(r.$slots,"default")]),_:3})],14,H)}}}),Q=["data-open","aria-controls"],W=f({__name:"DialogTrigger",setup(c){const{triggerClass:i}=h("dialog",["trigger"]),l=d(),o=C(m);return M(()=>{o==null||o.setTrigger(l.value)}),(s,t)=>{var a,e;return I(),$("button",{ref_key:"trigger",ref:l,class:b(n(i)()),"data-open":n((a=n(o))==null?void 0:a.isOpen),"aria-controls":n((e=n(o))==null?void 0:e.targetId),"aria-haspopup":"dialog",type:"button",onClick:t[0]||(t[0]=(...D)=>{var u,k;return((u=n(o))==null?void 0:u.open)&&((k=n(o))==null?void 0:k.open(...D))})},[_(s.$slots,"default")],10,Q)}}}),X=f({__name:"DialogTitle",props:{id:{default:()=>R()}},setup(c){const i=c,{titleClass:l}=h("dialog",["title"]),o=O(i,"id"),s=C(m);return T(o,t=>{s==null||s.setTitleId(t)}),(t,a)=>(I(),K(z,{id:t.id,class:b(n(l)()),"as-parent":""},{title:S(()=>[_(t.$slots,"default")]),_:3},8,["id","class"]))}}),Y=["id"],Z=f({__name:"DialogDescription",props:{id:{default:()=>R()}},setup(c){const i=c,{descriptionClass:l}=h("dialog",["description"]),o=O(i,"id"),s=C(m);return T(o,t=>{s==null||s.setDescriptionId(t)}),(t,a)=>(I(),$("p",{id:t.id,class:b(n(l)())},[_(t.$slots,"default")],10,Y))}}),ee=f({__name:"DialogClose",setup(c){const{closeClass:i}=h("dialog",["close"]),l=C(m);return(o,s)=>(I(),$("button",{class:b(n(i)()),onClick:s[0]||(s[0]=(...t)=>{var a,e;return((a=n(l))==null?void 0:a.close)&&((e=n(l))==null?void 0:e.close(...t))})},[_(o.$slots,"default")],2))}}),ae={Dialog:G,Target:J,Trigger:W,Title:X,Description:Z,Close:ee};export{m as D,ae as P};
