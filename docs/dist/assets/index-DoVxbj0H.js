import{d as b,i as m,a6 as P,r as c,p as T,w as I,g as S,t as v,a7 as k,k as w,a8 as R,W as B,c as M,f as _,S as z,a9 as C,a as E,h as x,y as N,z as $,m as A,n as g,U as L}from"./index-tvZMCYyo.js";import{u as D,f as K,s as U,a as y}from"./floating-ui.vue-Cf8nPmDF.js";const W=b({__name:"Popover",props:{hover:{type:Boolean,default:!1}},setup(p,{expose:h}){const u=p,d=m(P,void 0),t=c(),e=c(),o=c(),f=c(!1);d||T(P,o);const i={isOpen:f,targetId:t,hideAll(){R((d==null?void 0:d.value)??o.value)},hideChildren(){var s;(s=o.value)==null||s.querySelectorAll("[popover]").forEach(a=>{B(a)&&a.matches(":popover-open")&&a.hidePopover()})},hideSiblings(){var a,r;Array.from(((r=(a=o.value)==null?void 0:a.parentElement)==null?void 0:r.children)??[]).forEach(l=>{l.isSameNode(o.value??null)||B(l)&&(l!=null&&l.matches(":popover-open"))&&l.hidePopover()})},toggle(){var s;(s=o.value)==null||s.togglePopover()},show(){var s,a;(s=o.value)!=null&&s.matches(":popover-open")||(a=o.value)==null||a.showPopover()},hide(){var s,a;(s=o.value)!=null&&s.matches(":popover-open")&&((a=o.value)==null||a.hidePopover())},getTrigger(){return e.value},getTarget(){return o.value}};return h(i),I(o,s=>{s==null||s.addEventListener("toggle",a=>{f.value=a.newState=="open"})}),T(k,{hover:S(v(u,"hover")),isOpen:S(f),targetId:t,target:o,trigger:e,expose:i,setTargetId(s){t.value=s},setTarget(s){o.value=s},setTrigger(s){e.value=s}}),(s,a)=>w(s.$slots,"default")}}),j=b({__name:"PopoverTarget",props:{id:{default:()=>M()},is:{default:"div"},modal:{type:Boolean,default:!1},hardEscape:{type:Boolean,default:!1},placement:{default:"bottom"}},setup(p,{expose:h}){const u=p,d=v(u,"modal"),t=v(u,"hardEscape"),e=m(k),o=m(P,c()),f=_(()=>e==null?void 0:e.trigger.value),i=c(),s=_(()=>({popover:d.value?"manual":"auto"})),{floatingStyles:a,update:r,placement:l}=D(f,i,{placement:v(u,"placement"),middleware:[K({padding:20}),U({padding:20})],open:e==null?void 0:e.isOpen});z(()=>r()),h(e==null?void 0:e.expose),y(document,"keydown",n=>{!d.value&&t.value&&n.key==="Escape"&&R(o==null?void 0:o.value)}),y(window,"resize",n=>{e!=null&&e.isOpen.value&&C(r)}),y(document,"scroll",n=>{e!=null&&e.isOpen.value&&C(r)}),E(i,n=>{e==null||e.setTarget(n)}),E(v(u,"id"),n=>{e==null||e.setTargetId(n)}),I((e==null?void 0:e.isOpen)??c(),n=>{n&&r()});const F=()=>{var n;e!=null&&e.hover.value&&((n=i.value)==null||n.hidePopover())};return(n,H)=>{var O;return x(),N(L(n.is),A({ref_key:"target",ref:i},s.value,{id:n.id,style:[g(a),"margin: 0;"],"data-placement":g(l),"data-open":g((O=g(e))==null?void 0:O.isOpen),onMouseleave:F}),{default:$(()=>[w(n.$slots,"default")]),_:3},16,["id","style","data-placement","data-open"])}}}),q=b({__name:"PopoverTrigger",props:{is:{default:"button"},nonNative:{type:Boolean,default:!1},action:{default:"toggle"}},setup(p,{expose:h}){const u=p,d=v(u,"action"),t=m(k),e=c(),o=_(()=>({popovertarget:t==null?void 0:t.targetId.value,popovertargetaction:d.value,type:"button"}));h(t==null?void 0:t.expose),E(e,a=>{t==null||t.setTrigger(a)});const f=a=>{var r;t!=null&&t.hover.value?a.preventDefault():u.nonNative&&((r=t==null?void 0:t.target.value)==null||r.togglePopover())},i=()=>{var a;t!=null&&t.hover.value&&((a=t.target.value)==null||a.showPopover())},s=()=>{var a,r;t!=null&&t.hover.value&&!((a=t.target.value)!=null&&a.matches(":hover"))&&((r=t.target.value)==null||r.hidePopover())};return(a,r)=>{var l;return x(),N(L(a.nonNative?a.is:"button"),A({ref_key:"trigger",ref:e},!a.nonNative&&o.value,{"data-open":g((l=g(t))==null?void 0:l.isOpen),tabindex:"0",onClick:f,onFocusin:i,onFocusout:s,onMouseenter:i,onMouseleave:s}),{default:$(()=>[w(a.$slots,"default")]),_:3},16,["data-open"])}}}),Q={Popover:W,Target:j,Trigger:q};export{Q as P};
